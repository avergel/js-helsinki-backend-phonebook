(window.webpackJsonppart1=window.webpackJsonppart1||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n.n(r),a=n(0),c=n.n(a),u=n(4),i=n(2),l=function(e){var t=e.persons,n=e.deleteFunction;return c.a.createElement("div",null,t.map(function(e){return c.a.createElement("p",{key:e.name},e.name," ",e.number,"\xa0",c.a.createElement("button",{onClick:function(){return n(e)}},"delete"))}))},f=function(e){var t=e.value,n=e.filterFunction;return c.a.createElement("div",null,"filter shown with ",c.a.createElement("input",{value:t,onChange:n}))},s=function(e){var t=e.name,n=e.number,r=e.nameHandler,o=e.numberHandler,a=e.onSubmit;return c.a.createElement("form",{onSubmit:a},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:t,onChange:r})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:n,onChange:o})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},d={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},m={color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},p=function(e){var t=e.message,n=e.className;if(null===t)return null;var r="error"===n?d:m;return c.a.createElement("div",{style:r},t)},b=n(3),O=n.n(b);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var g="/api/persons",v=function(){return O.a.get(g).then(function(e){return e.data})},j=function(e){return v().then(function(e){return e.map(function(e){return e.id}).reduce(function(e,t){return e>t?e:t},1)}).then(function(t){return O.a.post(g,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{id:t+1})).then(function(e){return e.data})})},y=v,w=function(e){return O.a.delete("".concat(g,"/").concat(e)).then(function(e){return e.data})},E=function(e){return O.a.put("".concat(g,"/").concat(e.id),e).then(function(e){return e.data})};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var S=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),d=Object(i.a)(o,2),m=d[0],b=d[1],O=Object(a.useState)(""),h=Object(i.a)(O,2),g=h[0],v=h[1],S=Object(a.useState)(""),x=Object(i.a)(S,2),k=x[0],D=x[1],C=Object(a.useState)(null),T=Object(i.a)(C,2),F=T[0],H=T[1],B=Object(a.useState)(null),N=Object(i.a)(B,2),z=N[0],I=N[1];Object(a.useEffect)(function(){y().then(function(e){r(e)}).catch(function(e){alert("the operation couldn't be executed"),console.error(e)})},[]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(p,{message:F,className:z}),c.a.createElement(f,{value:k,filterFunction:function(e){D(e.target.value)}}),c.a.createElement("h3",null,"add a new"),c.a.createElement(s,{name:m,number:g,nameHandler:function(e){b(e.target.value)},numberHandler:function(e){v(e.target.value)},onSubmit:function(e){e.preventDefault();var t=n.filter(function(e){return e.name===m});t.length>0?window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))&&(E(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t[0],{number:g})).then(function(e){r(n.map(function(t){return t.id!==e.id?t:e})),H("".concat(e.name,"'s number replaced")),I("info"),setTimeout(function(){H(null)},5e3)}).catch(function(e){e.response.data.error?H(e.response.data.error):H("the operation couldn't be executed"),I("error"),setTimeout(function(){H(null)},5e3),console.error(e.response.data)}),b(""),v("")):(j({name:m,number:g}).then(function(e){console.log(e),r(n.concat(e)),H("Added ".concat(e.name)),I("info"),setTimeout(function(){H(null)},5e3)}).catch(function(e){e.response.data.error?H(e.response.data.error):H("the operation couldn't be executed"),I("error"),setTimeout(function(){H(null)},5e3),console.error(e.response.data)}),b(""),v(""))}}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(l,{persons:n.filter(function(e){return e.name.toLowerCase().includes(k.toLowerCase())}),deleteFunction:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(console.log(e),w(e.id).then(function(){r(n.filter(function(t){return t.id!==e.id})),H("".concat(e.name," deleted")),I("info"),setTimeout(function(){H(null)},5e3)}).catch(function(t){H("Information of ".concat(e.name," has already been removed from server")),I("error"),setTimeout(function(){H(null)},5e3),console.error(t)}))}}))};o.a.render(c.a.createElement(S,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.39c63b1b.chunk.js.map